var status = -1;

function start() {
    status = -1;
    action (1, 0, 0);
}

function action(mode, type, selection) {

    dlist = [3010506,3010512,3010513,3010514,3010515,3010516,3010517,3010518,3010519,3010520,3010521,3010522,3010523,3010524,3010525,3010526,3010530,3010531,3010532,3010533,3010534,3010535,3010536,3010537,3010538,3010539,3010540,3010541,3010542,3010543,3010544,3010545,3010546,3010547,3010548,3010549,3010550,3010551,3010552,3010553,3010554,3010555,3010556,3010557,3010558,3010559,3010560,3010561,3010562,3010563,3010564,3010565,3010566,3010567,3010568,3010569,3010570,3010571,3010572,3010573,3010574,3010575,3010576,3010577,3010578,3010579,3010580,3010581,3010582,3010584,3010585,3010587,3010589,3010590,3010592,3010593,3010596,3010597,3010598,3010600,3010601,3010611,3010612,3010613,3010622,3010623,3010624,3010636,3010637,3010638,3010639,3010640,3010641,3010642,3010643,3010644,3010651,3010652,3010653,3010654,3010655,3010656,3010659,3010662,3010672,3010673,3010674,3010675,3010676,3010677,3010678,3010679,3010680,3010681,3010682,3010683,3010685,3010690,3010691,3010692,3010693,3010694,3010695,3010697,3010700,3010702,3010703,3010704,3010705,3010708,3010719,3010720,3010721,3010722,3010723,3010733,3010734,3010735,3010742,3010743,3010744,3010757,3010760,3010761,3010766,3010767,3010783,3010797,3010798,3010800,3010801,3010802,3010803,3010804,3010810,3010811,3010812,3010814,3010815,3010835,3010836,3010837,3010838,3010844,3010851,3010852,3010854,3010862,3010863,3010867,3010868,3010869,3010870,3010871,3010872,3010873,3010874,3010875,3010878,3010941,3010942,3010943,3010946,3010956,3010957,3010958,3010959,3010960,3010961,3010962,3010964,3010965,3010976,3010978,3010979,3010980,3012017,3014000,3014001,3014002,3014003,3014004,3014005,3014006,3014011,3014019,3015000,3015003,3015004,3015015,3015016,3015017,3015018,3015019,3015020,3015021,3015022,3015023,3015024,3015025,3015026,3015030,3015031,3015032,3015033,3015041,3015042,3015043,3015044,3015048,3015049,3015050,3015061,3015062,3015063,3015064,3015075,3015081,3015082,3015083,3015089,3015090,3015091,3015092,3015107,3015109,3015111,3015112,3015114,3015115,3015116,3015117,3015118,3015119,3015120,3015155,3015156,3015157,3015159,3015160,3015161,3015167,3015168,3015171,3015172,3015173,3015174,3015175,3015210,3015223,3015234,3015235,3015236,3015238,3015239,3015240,3015241,3015243,3015244,3015245,3015246,3015247,3015248,3015263,3015264,3015272,3015276,3015277,3015278,3015279,3015295,3015296,3015297,3015298,3015299,3015300,3015301,3015302,3015303,3015305,3015306,3015309,3015310,3015311,3015312,3015314,3015315,3015325,3015326,3015327,3015330,3015331,3015332,3015333,3015339,3015340,3015341,3015346,3015350,3015354,3015367,3015368,3015369,3015387,3015388,3015389,3015390,3015391,3015392,3015394,3015404,3015405,3015408,3015409,3015410,3015411,3015412,3015413,3015414,3015416,3015420,3015421,3015422,3015423,3015429,3015431,3015432,3015433,3015434,3015435,3015437,3015438,3015440,3015447,3015448,3015468,3015472,3015473,3015474,3015475,3015476,3015481,3015516,3015517,3015518,3015520,3015521,3015522,3015523,3015544,3015545,3015547,3015564,3015565,3015566,3015567,3015568,3015569,3015570,3015571,3015572,3015586,3015587,3015602,3015603,3015610,3015611,3015612,3015613,3015614,3015615,3015616,3015617,3015618,3015633,3015636,3015637,3015638,3015642,3015643,3015644,3015645,3015646,3015648,3015649,3015650,3015651,3015652,3015653,3015658,3015663,3015664,3015667,3015687,3015688,3015689,3015690,3015691,3015692,3015703,3015704,3015705,3015706,3015707,3015708,3015710,3015711,3015745,3015747,3015748,3015749,3015750,3015753,3015761,3015762,3015764,3015767,3015768,3015769,3015770,3015786,3015787,3015788,3015789,3015790,3015791,3015792,3015798,3016200,3017000,3017001,3017002,3017003,3017004,3017005,3017006,3017007,3017008,3017009,3017010,3017011,3017012,3017013,3017014,3017015,3017016,3017017,3017018,3017019,3017020,3017021,3017022,3017027,3017028,3017029,3017030,3017031,3017032,3017033,3017037,3017038,3017039,3017040,3017041,3017042,3015761,3015767,3015768,3015769,3015770]

    COINCODE = 4033247; // 코인코드
    COINQTY = 30; // 코인개수

    if (mode == 1) {
        status++;
    } else {
	cm.dispose();
	return;
    }
    if (status == 0) {
        말 = "#fn나눔고딕 Extrabold# 의자을 뽑아 보라구! 95% 확률로 하나를 줄게~\r\n리스트는 아래와 같아.\r\n"
		        말+= "#fn나눔고딕 Extrabold# 랜덤으로 뽑을래? (#i"+COINCODE+"# #z"+COINCODE+"# "+COINQTY+"개 필요)\r\n"
        말+= "#L0# #b의자#k를 뽑아볼래요!\r\n"
		        말+= "\r\n"
        for (i=0; i<dlist.length; i++) {
            reals = Number(dlist[i])
            말+= "#i"+ reals + "#"
            if (i%10 == 9 && i!=29) {
                말+= "\r\n"
            }
        }
        말+= "\r\n"
        //말+= "랜덤으로 뽑을래? (#i"+COINCODE+"# #z"+COINCODE+"# "+COINQTY+"개 필요)\r\n\r\n"
        //말+= "#L0# #d의자을 뽑을래!"
        cm.sendSimple(말);
    } else if (status == 1) {
        realrandom = Math.floor(Math.random() * 100)
        if (cm.itemQuantity(COINCODE) >= COINQTY) {
            if (realrandom > 10) {
                random = dlist[Math.floor(Math.random() * dlist.length)]
                reals = Number(random)
                cm.gainItem(reals,1);
                cm.sendOk("#i"+reals+"# #z"+reals+"# 의자을 획득하셨습니다.");
            } else {
                cm.sendOk("안타깝게도 꽝이시네요.");
            }
            cm.gainItem(COINCODE,-COINQTY)
            cm.dispose();
        } else {
            cm.sendOk("의자을 뽑기 위한 코인이 부족합니다.");
        }
    }
}