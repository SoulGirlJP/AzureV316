var rewards = new Array(3010000,3010001,3010007,3010008,3010009,3010018,3010021,3010025,3010049,3010055,3010060,3010061,3010062,3010063,3010064,3010065,3010066,3010067,3010080,3010081,3010082,3010083,3010084,3010092,3010097,3010107,3010108,3010109,3010110,3010113,3010114,3010115,3010129,3010130,3010131,3010132,3010133,3010134,3010154,3010157,3010186,3010191,3010194,3010202,3010203,3010205,3010206,3010207,3010208,3010211,3010215,3010216,3010224,3010225,3010257,3010279,3010297,3010298,3010307,3010314,3010315,3010316,3010317,3010318,3010319,3010320,3010321,3010322,3010354,3010360,3010364);
var rewards2 = new Array(2210000,2210001,2210002,2210003,2210005,2210006,2210007,2210008,2210009,2210010,2210011,2210012,2210016,2210017,2210018,2210021,2210022,2210030,2210034,2210035,2210036,2210037,2210038,2210039,2210044,2210045,2210046,2210047,2210048,2210049,2210061,2210066,2210067,2210068,2210069,2210070,2210082,2213000,2213001,2213002,2213003,2213004,2213005,2213006,2213007,2213008,2213009,2213010,2213011,2213012,2213013,2213014,2213015,2213016,2213017,2213018,2213019,2213020,2213021,2213022,2213023,2213024,2213025,2213026,2213027,2213028,2213029,2213030,2213031,2213032,2213033,2213034,2213035,2213036,2213037,2213038,2213039,2213040,2213041,2213042,2213043);
var rewards3 = new Array(2001515,2001516,2001517,2001518,2001519,2001520,2002000,2002001,2002002,2002003,2002004,2002005,2004000,2004001,2004002,2004003,2004004,2004005,2004006,2004007,2004008,2004009,2004010,2004011,2004012,2004013,2004014,2004015,2004016,2004017,2004018,2004019,2004020,2004021,2004022,2004023,2004024,2004025,2004026,2004027,2004028,2004029,2004030,2004031,2004032,2004033,2004034,2004035,2004036,2004037,2004038,2004039,2004040,2004041,2004042,2004043,2004044,2004045,2004046,2004047,2004048,2004049,2004050,2004051,2004052,2004053,2004054,2004055,2004056,2004057,2004058,2004059,2004060,2004061,2004062,2004063,2004064,2004065,2004066,2004067,2004068,2004069,2004070,2004071,2004072,2004073,2004074,2004075,2004076,2004077,2004078,2004079,2004080,2004081,2004082,2004083,2004084,2004085,2004086,2004087,2004088,2004089,2004090,2004091,2004092,2004093,2004094,2004095,2004096,2004097,2004098,2004099,2004100,2004101,2004102,2004103,2004104,2004105,2004106,2004107,2004108,2004109,2004110,2004111,2004112,2004113,2004114,2004115,2004116,2004117,2004118,2004119,2004240,2004241,2003516,2003517);

importPackage(Packages.tools.RandomStream);
importPackage(Packages.server.items);
importPackage(Packages.client.items);
function start() {
status = -1;
	action(1, 0, 0);
}

function action(mode, type, selection) {
if (mode != 1)
cm.dispose();
else {
if (mode == 1)
status++;
else
status--;
if (status == 0) {
	cm.sendYesNo("봉인된 상자3을 여시겠습니까? 여시기 전, #r설치 인벤토리 공간, 소비 인벤토리 공간이 5칸 이상#k 비워져 있는지 확인해 주세요.");
} else if (status == 1) {
		var leftslot3 = cm.getPlayer().getInventory(PureInventoryType.SETUP).getNumFreeSlot();
               if (leftslot3 < 5) {
                   cm.sendOk("인벤토리 공간이 최소한 5칸은 필요합니다. 설치 탭의 공간을 5칸이상 비워주신 후 다시 열어주세요.");
                   cm.dispose();
                   return;
               }
		var leftslot2 = cm.getPlayer().getInventory(PureInventoryType.USE).getNumFreeSlot();
               if (leftslot2 < 5) {
                   cm.sendOk("인벤토리 공간이 최소한 5칸은 필요합니다. 소비 탭의 공간을 5칸이상 비워주신 후 다시 열어주세요.");
                   cm.dispose();
                   return;
               }

		var item = "봉인된 자물쇠에서 아래의 아이템이 나왔습니다.\r\n\r\n#fUI/UIWindow.img/QuestIcon/4/0#\r\n\r\n";
			
			
			for (var i = 0; i < 2 + Randomizer.nextInt(2); i++) {
			    var rand = Randomizer.nextInt(100);
			    var itemid = 2000000;
			    var quantity = 1;
			    if (rand < 30) {
			        itemid = rewards3[Randomizer.nextInt(rewards3.length)];
				quantity = 5 + Randomizer.nextInt(30);
			    } else if (rand < 50) {
				itemid = rewards2[Randomizer.nextInt(rewards2.length)];
			        quantity = 1 + Randomizer.nextInt(5);
			    } else {
				itemid = rewards[Randomizer.nextInt(rewards.length)];
			    }
			    item += "#b#i"+itemid+"# #z"+itemid+"# "+quantity+"개#k\r\n";
			    cm.gainItem(itemid, quantity);
			}
			
		
		cm.gainItem(2430028,-1);
		cm.sendOk(item);
		cm.dispose();
	} else { 
		cm.dispose();
	}
}
}